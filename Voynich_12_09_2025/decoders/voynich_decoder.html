<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voynich Manuscript Decoder - Complete Analysis Suite</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #0f0f1e 100%);
            color: #00ff41;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(0, 255, 65, 0.05);
            border: 2px solid #00ff41;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.2);
        }
        
        h1 {
            font-size: 2.8em;
            text-shadow: 0 0 20px #00ff41;
            margin-bottom: 15px;
            letter-spacing: 3px;
        }
        
        .subtitle {
            color: #00cc33;
            font-size: 1.3em;
            margin-bottom: 10px;
        }
        
        .system-info {
            font-size: 0.9em;
            color: #00aa22;
            margin-top: 10px;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .panel {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .panel-title {
            font-size: 1.6em;
            margin-bottom: 20px;
            color: #00ff41;
            border-bottom: 2px solid #00ff41;
            padding-bottom: 12px;
            text-shadow: 0 0 10px #00ff41;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #00cc33;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff41;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            border-radius: 5px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 15px #00ff41;
            border-color: #00ff41;
        }
        
        button {
            padding: 15px 30px;
            background: #00ff41;
            color: #000;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        button:hover {
            background: #00cc33;
            box-shadow: 0 0 25px #00ff41;
            transform: translateY(-2px);
        }
        
        .result-box {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid #00ff41;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .word-analysis {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid #00ff41;
            border-radius: 3px;
        }
        
        .word-header {
            font-size: 1.3em;
            color: #00ff41;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .analysis-row {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 15px;
            margin: 8px 0;
            padding: 8px;
            background: rgba(0, 255, 65, 0.03);
            border-radius: 3px;
        }
        
        .analysis-label {
            color: #00cc33;
            font-weight: bold;
        }
        
        .analysis-value {
            color: #00ff41;
        }
        
        .gematria-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .gematria-cell {
            padding: 10px;
            text-align: center;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            border-radius: 5px;
        }
        
        .gematria-letter {
            font-size: 1.5em;
            font-weight: bold;
            color: #00ff41;
        }
        
        .gematria-value {
            font-size: 0.9em;
            color: #00cc33;
            margin-top: 5px;
        }
        
        .position-display {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(0, 255, 65, 0.2);
            border: 1px solid #00ff41;
            border-radius: 3px;
            margin: 0 5px;
            font-weight: bold;
        }
        
        .watcher-badge {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff4444;
            border-radius: 3px;
            color: #ff6666;
            margin-left: 10px;
            font-weight: bold;
        }
        
        .triple-vision-badge {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(0, 100, 255, 0.2);
            border: 1px solid #4488ff;
            border-radius: 3px;
            color: #6699ff;
            margin-left: 10px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #00ff41;
        }
        
        .tab {
            padding: 12px 25px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: #00cc33;
            cursor: pointer;
            border-top: 2px solid transparent;
            border-left: 2px solid transparent;
            border-right: 2px solid transparent;
            transition: all 0.3s;
            margin-right: 5px;
        }
        
        .tab:hover {
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
        }
        
        .tab.active {
            background: rgba(0, 255, 65, 0.15);
            color: #00ff41;
            border-top-color: #00ff41;
            border-left-color: #00ff41;
            border-right-color: #00ff41;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .known-words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .known-word-card {
            padding: 12px;
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid #00ff41;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .known-word-card:hover {
            background: rgba(0, 255, 65, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 65, 0.3);
        }
        
        .known-word-text {
            font-size: 1.2em;
            color: #00ff41;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .known-word-meaning {
            font-size: 0.9em;
            color: #00cc33;
        }
        
        .frequency-badge {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(255, 165, 0, 0.2);
            border: 1px solid #ffaa44;
            border-radius: 3px;
            color: #ffcc66;
            font-size: 0.8em;
            margin-left: 5px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .comparison-item {
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-left: 3px solid #00ff41;
            border-radius: 3px;
        }
        
        .comparison-title {
            font-size: 1.1em;
            color: #00ff41;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .match-percentage {
            font-size: 2em;
            color: #00ff41;
            text-align: center;
            margin: 10px 0;
            text-shadow: 0 0 10px #00ff41;
        }
        
        .layer-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .layer-checkbox {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .layer-checkbox:hover {
            background: rgba(0, 255, 65, 0.2);
        }
        
        .layer-checkbox input {
            width: auto;
            margin-right: 8px;
        }
        
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .highlight-watchers {
            color: #ff6666;
            font-weight: bold;
        }
        
        .highlight-fire {
            color: #ffaa44;
            font-weight: bold;
        }
        
        .highlight-triple {
            color: #6699ff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚äï VOYNICH MANUSCRIPT DECODER ‚äó</h1>
            <div class="subtitle">Complete Multi-Layer Analysis & Translation System</div>
            <div class="system-info">
                EMx v2.7 | 27-State Lattice | Hebrew/Greek Gematria | TNO Triple Parsing | Gate Validation
            </div>
        </header>

        <div class="main-grid">
            <!-- Left Column: Input & Analysis -->
            <div class="panel">
                <div class="panel-title">‚äï WORD DECODER</div>
                
                <div class="input-group">
                    <label>Enter Voynich Word(s):</label>
                    <textarea id="voynichInput" placeholder="e.g., okaiin, daiin, qokal, shol, char, chal"></textarea>
                </div>
                
                <div class="input-group">
                    <label>Gematria System:</label>
                    <select id="gematriaSystem">
                        <option value="hebrew">Hebrew Gematria</option>
                        <option value="greek">Greek Isopsephy</option>
                        <option value="voynich">Voynich Pattern (auto-detect)</option>
                    </select>
                </div>
                
                <button onclick="decodeWords()">‚äó DECODE WORDS ‚äó</button>
                <button onclick="showKnownWords()">üìö Known Words</button>
                <button onclick="analyzePattern()">üîç Pattern Analysis</button>
                
                <div class="result-box" id="decodeResults"></div>
            </div>

            <!-- Right Column: Gematria Reference -->
            <div class="panel">
                <div class="panel-title">‚äó GEMATRIA REFERENCE ‚äï</div>
                
                <div class="tabs">
                    <button class="tab active" onclick="showTab('hebrew-tab')">Hebrew</button>
                    <button class="tab" onclick="showTab('greek-tab')">Greek</button>
                    <button class="tab" onclick="showTab('voynich-tab')">Voynich Patterns</button>
                </div>
                
                <div id="hebrew-tab" class="tab-content active">
                    <div class="gematria-table" id="hebrewTable"></div>
                </div>
                
                <div id="greek-tab" class="tab-content">
                    <div class="gematria-table" id="greekTable"></div>
                </div>
                
                <div id="voynich-tab" class="tab-content">
                    <div class="result-box">
                        <h3 style="color: #00ff41; margin-bottom: 15px;">Common Voynich Patterns:</h3>
                        <div id="voynichPatterns"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Width: Multi-Layer Analysis -->
        <div class="panel full-width">
            <div class="panel-title">‚äï MULTI-LAYER INTERPRETATION ‚äó</div>
            
            <div class="layer-selector" id="layerSelector"></div>
            
            <div class="result-box" id="layerResults"></div>
        </div>

        <!-- Full Width: Known Words Database -->
        <div class="panel full-width">
            <div class="panel-title">‚äó KNOWN WORDS DATABASE ‚äï</div>
            
            <div class="input-group">
                <label>Search Known Words:</label>
                <input type="text" id="wordSearch" placeholder="Search by Voynich text, meaning, or position..." onkeyup="filterKnownWords()">
            </div>
            
            <div class="known-words-grid" id="knownWordsGrid"></div>
        </div>

        <!-- Full Width: Folio Comparison -->
        <div class="panel full-width">
            <div class="panel-title">‚äï FOLIO COMPARISON TOOL ‚äó</div>
            
            <div class="input-group">
                <label>Compare Folios:</label>
                <select id="folioCompare">
                    <option value="">Select folios to compare...</option>
                    <option value="f71v-f72r1">f71v (Taurus Light) vs f72r1 (Taurus Dark)</option>
                    <option value="f85v2">f85v2 (Measured Tokens)</option>
                </select>
            </div>
            
            <button onclick="compareFolios()">‚äó COMPARE ‚äó</button>
            
            <div class="result-box" id="comparisonResults"></div>
        </div>
    </div>

    <script>
        // ==================== DATA STRUCTURES ====================
        
        const HEBREW_GEMATRIA = {
            'a': 1, 'aleph': 1, '◊ê': 1,
            'b': 2, 'bet': 2, '◊ë': 2,
            'g': 3, 'gimel': 3, '◊í': 3,
            'd': 4, 'dalet': 4, '◊ì': 4,
            'h': 5, 'he': 5, '◊î': 5,
            'v': 6, 'vav': 6, '◊ï': 6, 'w': 6,
            'z': 7, 'zayin': 7, '◊ñ': 7,
            'ch': 8, 'chet': 8, '◊ó': 8,
            't': 9, 'tet': 9, '◊ò': 9,
            'y': 10, 'yod': 10, 'yud': 10, '◊ô': 10, 'i': 10,
            'k': 20, 'kaf': 20, '◊õ': 20, 'c': 20,
            'l': 30, 'lamed': 30, '◊ú': 30,
            'm': 40, 'mem': 40, '◊û': 40,
            'n': 50, 'nun': 50, '◊†': 50,
            's': 60, 'samekh': 60, '◊°': 60,
            'o': 70, 'ayin': 70, '◊¢': 70, 'e': 70,
            'p': 80, 'peh': 80, '◊§': 80, 'f': 80,
            'tz': 90, 'tzadi': 90, '◊¶': 90,
            'q': 100, 'qof': 100, 'koph': 100, '◊ß': 100,
            'r': 200, 'resh': 200, '◊®': 200,
            'sh': 300, 'shin': 300, '◊©': 300,
            'th': 400, 'tav': 400, '◊™': 400
        };
        
        const EMX_LATTICE = {
            0: { triple: [-1, -1, -1], k: 3, n_class: "N5", layer: "T3", gamma: 0.992, null_fraction: 0.000 },
            1: { triple: [0, -1, 0], k: 2, n_class: "N4", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            2: { triple: [1, -1, 0], k: 3, n_class: "N3", layer: "T3", gamma: 0.992, null_fraction: 0.000 },
            5: { triple: [1, 0, 0], k: 2, n_class: "N2", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            6: { triple: [0, 1, 0], k: 3, n_class: "N3", layer: "T3", gamma: 0.992, null_fraction: 0.000 },
            8: { triple: [1, 1, 0], k: 3, n_class: "N3", layer: "T3", gamma: 0.992, null_fraction: 0.000 },
            9: { triple: [0, 0, 0], k: 2, n_class: "N4", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            12: { triple: [0, 0, 0], k: 1, n_class: "N1", layer: "T1", gamma: 0.999, null_fraction: 0.667 },
            13: { triple: [0, 0, 0], k: 0, n_class: "N0", layer: "T0", gamma: 1.000, null_fraction: 1.000, special: "ORIGIN" },
            14: { triple: [1, 0, 0], k: 1, n_class: "N1", layer: "T1", gamma: 0.999, null_fraction: 0.667 },
            15: { triple: [0, 1, 0], k: 2, n_class: "N2", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            19: { triple: [0, 0, 1], k: 2, n_class: "N2", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            20: { triple: [1, 0, 1], k: 3, n_class: "N3", layer: "T3", gamma: 0.992, null_fraction: 0.000 },
            22: { triple: [0, 0, 1], k: 1, n_class: "N1", layer: "T1", gamma: 0.999, null_fraction: 0.667 },
            23: { triple: [1, 0, 1], k: 2, n_class: "N4", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            25: { triple: [0, 1, 1], k: 2, n_class: "N4", layer: "T2", gamma: 0.996, null_fraction: 0.333 },
            26: { triple: [1, 1, 1], k: 3, n_class: "N5", layer: "T3", gamma: 0.992, null_fraction: 0.000 }
        };
        
        const KNOWN_WORDS = {
            'aiin': {
                gematria: 140,
                position: 17,
                frequency: 'HIGH',
                meanings: ['The Watchers', 'Seeing-Ones', 'Eyes (plural)', 'Vision-growth'],
                element: 'Chlorine (Cl)',
                tno: 'T0N1O1',
                notes: 'Appears frequently, often marks observation/witnessing'
            },
            'daiin': {
                gematria: 144,
                position: 9,
                frequency: 'HIGH',
                meanings: ['Gateway-Watchers', 'Door-vision-growth', 'Knowledge-growing'],
                element: 'Fluorine (F)',
                tno: 'T2N4O1',
                notes: '144 = 12¬≤ (perfect square)'
            },
            'qokal': {
                gematria: 221,
                position: 5,
                frequency: 'VERY HIGH',
                meanings: ['Sacred-vision-power', 'Holy cycle', 'Integration marker'],
                element: 'Boron (B)',
                tno: 'T0N2O1',
                notes: 'Most frequent compound, integration/breath-window'
            },
            'okal': {
                gematria: 120,
                position: 12,
                frequency: 'VERY HIGH',
                meanings: ['Vision-power', 'Container-teaching', 'Life priority'],
                element: 'Magnesium (Mg)',
                tno: 'T1N1O2',
                notes: 'Chlorophyll center, second-highest frequency'
            },
            'ol': {
                gematria: 100,
                position: 19,
                frequency: 'HIGH',
                meanings: ['Eye-teaching', 'Vision-instruction', 'Communication'],
                element: 'Potassium (K)',
                tno: 'T2N2O7',
                notes: '100 = 10¬≤ (perfect square), nerve impulses'
            },
            'or': {
                gematria: 270,
                position: 0,
                frequency: 'VERY HIGH',
                meanings: ['Light', 'Eye-head', 'Completion-cycle'],
                element: 'Xenon (Xe) / Thallium (Tl)',
                tno: 'T3N5O1',
                notes: 'Highest frequency (11.6%), 270 = 10√ó27'
            },
            'ar': {
                gematria: 201,
                position: 1,
                frequency: 'HIGH',
                meanings: ['First-wisdom', 'Beginning-head', 'Unity'],
                element: 'Hydrogen (H)',
                tno: 'T2N4O1',
                notes: 'Simple foundational wisdom marker'
            },
            'char': {
                gematria: 212,
                position: 23,
                frequency: 'HIGH',
                meanings: ['Fire', 'Heat', 'Transformation', 'Life-head'],
                element: 'Vanadium (V)',
                tno: 'T0N2O3',
                notes: 'Fire catalyst, appears at triple-corner'
            },
            'chal': {
                gematria: 38,
                position: 15,
                frequency: 'VERY HIGH',
                meanings: ['Life-teaching', 'First-instruction', 'Energy'],
                element: 'Phosphorus (P)',
                tno: 'T0N1O2',
                notes: 'ATP energy marker, witnessed 10√ó in one text'
            },
            'shol': {
                gematria: 408,
                position: 3,
                frequency: 'HIGH',
                meanings: ['Fire-teaching', 'Peace-teaching', 'Flow-movement'],
                element: 'Lithium (Li)',
                tno: 'T0N1O1',
                notes: 'Bridge/movement marker'
            },
            'dal': {
                gematria: 35,
                position: 8,
                frequency: 'HIGH',
                meanings: ['Door', 'Gateway', 'Foundation', 'Support'],
                element: 'Oxygen (O)',
                tno: 'T0N0O2',
                notes: 'Gateway marker, foundation'
            },
            'otar': {
                gematria: 470,
                position: 21,
                frequency: 'HIGH',
                meanings: ['Sealed-wisdom', 'Witness-marker', 'First-head sealed'],
                element: 'Scandium (Sc)',
                tno: 'T0N0O1',
                notes: 'Witness-place, often doubled'
            },
            'otam': {
                gematria: 440,
                position: 13,
                frequency: 'MEDIUM',
                meanings: ['Sealed-waters', 'First-water sealed', 'Origin-sealed'],
                element: 'Aluminum (Al) / Origin',
                tno: 'T0N0O1',
                notes: 'Water-sealing marker, often repeated'
            },
            'tal': {
                gematria: 431,
                position: 26,
                frequency: 'HIGH',
                meanings: ['Dew', 'Ultimate-power', 'Mark-teaching', 'Iron-throne'],
                element: 'Iron (Fe)',
                tno: 'T4N0O7',
                notes: 'Maximum capacity marker'
            },
            'shar': {
                gematria: 501,
                position: 23,
                frequency: 'MEDIUM',
                meanings: ['Fire-head', 'Transformation-wisdom', 'Shin-head'],
                element: 'Vanadium (V)',
                tno: 'T0N2O3',
                notes: 'Triple-corner transformation'
            },
            'shalom': {
                gematria: 376,
                position: 17,
                frequency: 'MEDIUM',
                meanings: ['Peace', 'Wholeness', 'Equilibrium', 'Balance'],
                element: 'Chlorine (Cl)',
                tno: 'T0N1O1',
                notes: 'Peace-binding, equilibrium state'
            },
            'okeey': {
                gematria: 125,
                position: 17,
                frequency: 'MEDIUM',
                meanings: ['Vision-power double-sight-action', 'Capacity-eyes-hand'],
                element: 'Chlorine (Cl)',
                tno: 'T0N1O1',
                notes: 'Double-vision marker'
            },
            'oteey': {
                gematria: 485,
                position: 26,
                frequency: 'MEDIUM',
                meanings: ['Sealed double-vision action', 'Mark-eyes-hand'],
                element: 'Iron (Fe)',
                tno: 'T4N0O7',
                notes: 'Sealed double-vision'
            },
            'chey': {
                gematria: 18,
                position: 18,
                frequency: 'MEDIUM',
                meanings: ['Life-hand', 'Living-action', 'Chai'],
                element: 'Argon (Ar)',
                tno: 'T3N3O8',
                notes: 'Living action marker'
            },
            'dy': {
                gematria: 14,
                position: 14,
                frequency: 'HIGH',
                meanings: ['Door-hand', 'Gateway-action', 'Action-gateway'],
                element: 'Silicon (Si)',
                tno: 'T1N1O3',
                notes: 'Physical template, action-gateway'
            }
        };
        
        const LAYERS = [
            { id: 'bronze', name: 'Bronze Age (Symbolic/Mythological)', color: '#ffaa44' },
            { id: 'astronomical', name: 'Astronomical (Zodiacal)', color: '#4488ff' },
            { id: 'computational', name: 'Computational (Algorithms)', color: '#00ff41' },
            { id: 'physical', name: 'Physical (Thermodynamics)', color: '#ff6666' },
            { id: 'cognitive', name: 'Cognitive (Psychology)', color: '#aa66ff' },
            { id: 'biochemical', name: 'Biochemical (Molecular)', color: '#66ffaa' },
            { id: 'genetic', name: 'Genetic (DNA/RNA)', color: '#ffff66' },
            { id: 'cellular', name: 'Cellular (Organelles)', color: '#ff66ff' },
            { id: 'quantum', name: 'Quantum (Quantum Biology)', color: '#66ffff' },
            { id: 'elemental', name: 'Elemental (Periodic Table)', color: '#ffaa00' }
        ];
        
        // ==================== INITIALIZATION ====================
        
        window.onload = function() {
            initializeGematriaTable();
            initializeLayerSelector();
            displayKnownWords();
            displayVoynichPatterns();
        };
        
        function initializeGematriaTable() {
            const hebrewTable = document.getElementById('hebrewTable');
            
            const hebrewLetters = [
                ['◊ê', 'Aleph', 1], ['◊ë', 'Bet', 2], ['◊í', 'Gimel', 3], ['◊ì', 'Dalet', 4],
                ['◊î', 'He', 5], ['◊ï', 'Vav', 6], ['◊ñ', 'Zayin', 7], ['◊ó', 'Chet', 8],
                ['◊ò', 'Tet', 9], ['◊ô', 'Yod', 10], ['◊õ', 'Kaf', 20], ['◊ú', 'Lamed', 30],
                ['◊û', 'Mem', 40], ['◊†', 'Nun', 50], ['◊°', 'Samekh', 60], ['◊¢', 'Ayin', 70],
                ['◊§', 'Peh', 80], ['◊¶', 'Tzadi', 90], ['◊ß', 'Qof', 100], ['◊®', 'Resh', 200],
                ['◊©', 'Shin', 300], ['◊™', 'Tav', 400]
            ];
            
            hebrewLetters.forEach(([letter, name, value]) => {
                const cell = document.createElement('div');
                cell.className = 'gematria-cell';
                cell.innerHTML = `
                    <div class="gematria-letter">${letter}</div>
                    <div>${name}</div>
                    <div class="gematria-value">${value}</div>
                `;
                hebrewTable.appendChild(cell);
            });
        }
        
        function initializeLayerSelector() {
            const selector = document.getElementById('layerSelector');
            
            LAYERS.forEach(layer => {
                const label = document.createElement('label');
                label.className = 'layer-checkbox';
                label.innerHTML = `
                    <input type="checkbox" id="layer-${layer.id}" value="${layer.id}">
                    <span style="color: ${layer.color}">${layer.name}</span>
                `;
                selector.appendChild(label);
            });
        }
        
        function displayVoynichPatterns() {
            const container = document.getElementById('voynichPatterns');
            
            const patterns = [
                { pattern: 'aiin', meaning: 'Watchers marker (◊¢◊ô◊ü-nun)', frequency: 'Very high' },
                { pattern: 'daiin', meaning: 'Gateway-Watchers (144 = 12¬≤)', frequency: 'High' },
                { pattern: 'qo-', meaning: 'Sacred/holy prefix (◊ß◊£)', frequency: 'High' },
                { pattern: 'ot-', meaning: 'Sealed/marked prefix (◊¢◊™)', frequency: 'Very high' },
                { pattern: 'ch-', meaning: 'Life/living prefix (◊ó◊ô)', frequency: 'Very high' },
                { pattern: 'sh-', meaning: 'Fire/transformation (◊©◊ô◊ü)', frequency: 'High' },
                { pattern: '-al', meaning: 'First-teaching suffix (◊ê◊ú)', frequency: 'Very high' },
                { pattern: '-dy', meaning: 'Gateway-action suffix (◊ì◊ô)', frequency: 'High' },
                { pattern: '-aiin', meaning: 'Watchers suffix', frequency: 'High' },
                { pattern: 'teee-', meaning: 'Triple-vision marker (3 eyes)', frequency: 'Medium' },
                { pattern: 'okal', meaning: 'Vision-power (container)', frequency: 'Very high' },
                { pattern: 'char', meaning: 'Fire/heat (position 23)', frequency: 'High' }
            ];
            
            patterns.forEach(p => {
                const div = document.createElement('div');
                div.className = 'word-analysis';
                div.innerHTML = `
                    <div class="analysis-row">
                        <span class="analysis-label">Pattern:</span>
                        <span class="analysis-value">${p.pattern}</span>
                    </div>
                    <div class="analysis-row">
                        <span class="analysis-label">Meaning:</span>
                        <span class="analysis-value">${p.meaning}</span>
                    </div>
                    <div class="analysis-row">
                        <span class="analysis-label">Frequency:</span>
                        <span class="analysis-value">${p.frequency}</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }
        
        // ==================== CORE DECODING ====================
        
        function calculateGematria(word, system = 'hebrew') {
            let total = 0;
            let i = 0;
            
            word = word.toLowerCase();
            
            while (i < word.length) {
                // Try two-character combinations first
                if (i < word.length - 1) {
                    const twoChar = word.substring(i, i + 2);
                    if (HEBREW_GEMATRIA[twoChar]) {
                        total += HEBREW_GEMATRIA[twoChar];
                        i += 2;
                        continue;
                    }
                }
                
                // Single character
                const oneChar = word[i];
                if (HEBREW_GEMATRIA[oneChar]) {
                    total += HEBREW_GEMATRIA[oneChar];
                }
                i++;
            }
            
            return total;
        }
        
        function analyzeWord(word) {
            const gematria = calculateGematria(word);
            const position = gematria % 27;
            const latticeData = EMX_LATTICE[position] || {};
            
            // Check for special patterns
            const isWatcher = word.includes('aiin') || word.includes('daiin');
            const hasTripleVision = word.includes('eee') || word.includes('tee');
            const hasFire = word.includes('sh') || word.includes('char') || word.includes('shar');
            const isSealed = word.startsWith('ot');
            const isHoly = word.startsWith('qo');
            const isLiving = word.startsWith('ch');
            
            // Decode letter by letter
            const letterBreakdown = [];
            let tempGem = 0;
            for (let i = 0; i < word.length; i++) {
                const char = word[i];
                const val = HEBREW_GEMATRIA[char] || 0;
                tempGem += val;
                if (val > 0) {
                    letterBreakdown.push(`${char} (${val})`);
                }
            }
            
            return {
                word,
                gematria,
                position,
                latticeData,
                isWatcher,
                hasTripleVision,
                hasFire,
                isSealed,
                isHoly,
                isLiving,
                letterBreakdown
            };
        }
        
        function decodeWords() {
            const input = document.getElementById('voynichInput').value.trim();
            const results = document.getElementById('decodeResults');
            
            if (!input) {
                results.innerHTML = '<div style="color: #ff6666;">Please enter Voynich word(s)</div>';
                return;
            }
            
            const words = input.split(/[\s,;]+/).filter(w => w.length > 0);
            let html = '';
            
            words.forEach((word, idx) => {
                const analysis = analyzeWord(word);
                const knownWord = KNOWN_WORDS[word.toLowerCase()];
                
                html += `<div class="word-analysis">`;
                html += `<div class="word-header">${idx + 1}. ${word.toUpperCase()}`;
                
                if (analysis.isWatcher) {
                    html += `<span class="watcher-badge">üëÅ WATCHERS</span>`;
                }
                if (analysis.hasTripleVision) {
                    html += `<span class="triple-vision-badge">üëÅüëÅüëÅ TRIPLE VISION</span>`;
                }
                
                html += `</div>`;
                
                // Letter breakdown
                html += `<div class="analysis-row">
                    <span class="analysis-label">Letters:</span>
                    <span class="analysis-value">${analysis.letterBreakdown.join(' + ')}</span>
                </div>`;
                
                html += `<div class="analysis-row">
                    <span class="analysis-label">Gematria:</span>
                    <span class="analysis-value">${analysis.gematria}</span>
                </div>`;
                
                html += `<div class="analysis-row">
                    <span class="analysis-label">Position:</span>
                    <span class="analysis-value"><span class="position-display">P${analysis.position}</span> (${analysis.gematria} mod 27)</span>
                </div>`;
                
                if (analysis.latticeData.triple) {
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Triple:</span>
                        <span class="analysis-value">(${analysis.latticeData.triple.join(', ')})</span>
                    </div>`;
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label">TNO:</span>
                        <span class="analysis-value">${analysis.latticeData.layer}${analysis.latticeData.n_class}</span>
                    </div>`;
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label">k-value:</span>
                        <span class="analysis-value">${analysis.latticeData.k} (${getKMeaning(analysis.latticeData.k)})</span>
                    </div>`;
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Harmonics:</span>
                        <span class="analysis-value">Œ≥=${analysis.latticeData.gamma}, ‚àÖ=${analysis.latticeData.null_fraction}</span>
                    </div>`;
                }
                
                // Pattern analysis
                let patterns = [];
                if (analysis.isSealed) patterns.push('Sealed (ot-)');
                if (analysis.isHoly) patterns.push('Sacred (qo-)');
                if (analysis.isLiving) patterns.push('Living (ch-)');
                if (analysis.hasFire) patterns.push('<span class="highlight-fire">Fire (sh-/char)</span>');
                if (analysis.isWatcher) patterns.push('<span class="highlight-watchers">Watchers (-aiin)</span>');
                if (analysis.hasTripleVision) patterns.push('<span class="highlight-triple">Triple Vision (eee)</span>');
                
                if (patterns.length > 0) {
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Patterns:</span>
                        <span class="analysis-value">${patterns.join(', ')}</span>
                    </div>`;
                }
                
                // Known word data
                if (knownWord) {
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Known Word:</span>
                        <span class="analysis-value" style="color: #ffaa44;">‚úì YES <span class="frequency-badge">${knownWord.frequency}</span></span>
                    </div>`;
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Meanings:</span>
                        <span class="analysis-value">${knownWord.meanings.join(' / ')}</span>
                    </div>`;
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Element:</span>
                        <span class="analysis-value">${knownWord.element}</span>
                    </div>`;
                    
                    if (knownWord.notes) {
                        html += `<div class="analysis-row">
                            <span class="analysis-label">Notes:</span>
                            <span class="analysis-value" style="font-style: italic;">${knownWord.notes}</span>
                        </div>`;
                    }
                }
                
                html += `</div>`;
            });
            
            results.innerHTML = html;
            
            // Trigger multi-layer analysis if layers selected
            analyzeMultiLayer(words);
        }
        
        function getKMeaning(k) {
            const meanings = {
                0: 'Stillpoint/Origin',
                1: 'Single-axis/Cardinal',
                2: 'Edge/Pair',
                3: 'Corner/Triple'
            };
            return meanings[k] || 'Unknown';
        }
        
        // ==================== MULTI-LAYER ANALYSIS ====================
        
        function analyzeMultiLayer(words) {
            const selectedLayers = LAYERS.filter(layer => 
                document.getElementById(`layer-${layer.id}`)?.checked
            );
            
            if (selectedLayers.length === 0) return;
            
            const results = document.getElementById('layerResults');
            let html = '<h3 style="color: #00ff41; margin-bottom: 15px;">Multi-Layer Interpretation:</h3>';
            
            words.forEach(word => {
                const analysis = analyzeWord(word);
                
                html += `<div class="word-analysis">`;
                html += `<div class="word-header">${word.toUpperCase()} - Position ${analysis.position}</div>`;
                
                selectedLayers.forEach(layer => {
                    const interpretation = getLayerInterpretation(word, analysis, layer.id);
                    
                    html += `<div class="analysis-row">
                        <span class="analysis-label" style="color: ${layer.color}">${layer.name}:</span>
                        <span class="analysis-value">${interpretation}</span>
                    </div>`;
                });
                
                html += `</div>`;
            });
            
            results.innerHTML = html;
        }
        
        function getLayerInterpretation(word, analysis, layerId) {
            const pos = analysis.position;
            const knownWord = KNOWN_WORDS[word.toLowerCase()];
            
            // Generate interpretation based on layer and position
            const interpretations = {
                bronze: getBronzeAgeInterpretation(word, analysis, knownWord),
                astronomical: getAstronomicalInterpretation(pos),
                computational: getComputationalInterpretation(word, analysis),
                physical: getPhysicalInterpretation(pos, analysis),
                cognitive: getCognitiveInterpretation(word, analysis),
                biochemical: getBiochemicalInterpretation(pos),
                genetic: getGeneticInterpretation(pos),
                cellular: getCellularInterpretation(word, analysis),
                quantum: getQuantumInterpretation(pos, analysis),
                elemental: getElementalInterpretation(pos)
            };
            
            return interpretations[layerId] || 'Analysis pending...';
        }
        
        function getBronzeAgeInterpretation(word, analysis, knownWord) {
            if (knownWord) {
                return knownWord.meanings[0] + (knownWord.notes ? ` ‚Äî ${knownWord.notes}` : '');
            }
            
            let parts = [];
            if (analysis.isSealed) parts.push('Sealed/marked');
            if (analysis.isHoly) parts.push('sacred');
            if (analysis.isLiving) parts.push('living');
            if (analysis.isWatcher) parts.push('watched by the Seeing-Ones');
            
            return parts.length > 0 ? parts.join(' ') + ' process' : 'Symbolic process marker';
        }
        
        function getAstronomicalInterpretation(pos) {
            // Map positions to astronomical significance
            if (pos === 0) return 'Completion cycle (Xenon noble gas, 10√ó27)';
            if (pos === 5) return 'Integration bridge (Boron, breath-window)';
            if (pos === 13) return 'Stillpoint origin (geometric center)';
            if (pos === 14) return 'Physical template (Silicon, 27 isotopes)';
            if (pos === 19) return 'Communication (Potassium nerve impulses)';
            return `Zodiacal position ${pos}/27`;
        }
        
        function getComputationalInterpretation(word, analysis) {
            if (analysis.isWatcher) return 'Error checking / monitoring daemon';
            if (word.includes('ot')) return 'Sealed state / checkpointed';
            if (word.includes('qo')) return 'High-priority / kernel-level operation';
            if (analysis.latticeData.k === 0) return 'Idle state / origin return';
            if (analysis.latticeData.k === 3) return 'Triple-nested loop / high complexity';
            return `Process at complexity k=${analysis.latticeData.k}`;
        }
        
        function getPhysicalInterpretation(pos, analysis) {
            if (pos === 23) return 'Vanadium catalyst (fire transformation)';
            if (pos === 15) return 'Phosphorus (ATP energy storage)';
            if (pos === 26) return 'Iron (maximum magnetic moment)';
            if (pos === 13) return 'Equilibrium state (zero net force)';
            if (analysis.latticeData.k === 0) return 'Ground state energy';
            return `Thermodynamic state k=${analysis.latticeData.k}`;
        }
        
        function getCognitiveInterpretation(word, analysis) {
            if (analysis.isWatcher) return 'Attention / conscious monitoring';
            if (word.includes('chal')) return 'Working memory / active maintenance';
            if (analysis.latticeData.k === 0) return 'Default mode network / resting state';
            if (analysis.latticeData.k === 3) return 'High cognitive load / executive function';
            return `Cognitive process (load=${analysis.latticeData.k})`;
        }
        
        function getBiochemicalInterpretation(pos) {
            if (pos === 15) return 'ATP synthesis (phosphorus)';
            if (pos === 23) return 'Vanadium-dependent haloperoxidase';
            if (pos === 12) return 'Magnesium (chlorophyll center)';
            if (pos === 26) return 'Iron (hemoglobin oxygen carrier)';
            if (pos === 6) return 'Carbon (organic backbone)';
            return `Biochemical position ${pos}`;
        }
        
        function getGeneticInterpretation(pos) {
            if (pos === 15) return 'Phosphate backbone (DNA structure)';
            if (pos === 16) return 'Sulfur (Z=16, cysteine bridges)';
            if (pos === 14) return 'Silicon template (structural guide)';
            return `Genetic locus ${pos}`;
        }
        
        function getCellularInterpretation(word, analysis) {
            if (word.includes('ot')) return 'Membrane-bound / compartmentalized';
            if (analysis.latticeData.k === 0) return 'Nucleus (origin)';
            if (analysis.latticeData.k === 3) return 'Mitochondria (high activity)';
            return `Cellular component`;
        }
        
        function getQuantumInterpretation(pos, analysis) {
            if (analysis.hasTripleVision) return 'Three-particle entanglement (GHZ state)';
            if (analysis.latticeData.k === 0) return 'Quantum ground state';
            if (pos === 5) return 'Quantum coherence (breath-window)';
            return `Quantum state k=${analysis.latticeData.k}`;
        }
        
        function getElementalInterpretation(pos) {
            const elements = {
                1: 'Hydrogen (H)',
                2: 'Helium (He)',
                5: 'Boron (B)',
                6: 'Carbon (C)',
                8: 'Oxygen (O)',
                12: 'Magnesium (Mg)',
                13: 'Aluminum (Al)',
                14: 'Silicon (Si)',
                15: 'Phosphorus (P)',
                19: 'Potassium (K)',
                20: 'Calcium (Ca)',
                22: 'Titanium (Ti)',
                23: 'Vanadium (V)',
                25: 'Manganese (Mn)',
                26: 'Iron (Fe)'
            };
            return elements[pos] || `Z mod 27 = ${pos}`;
        }
        
        // ==================== KNOWN WORDS ====================
        
        function displayKnownWords() {
            const grid = document.getElementById('knownWordsGrid');
            grid.innerHTML = '';
            
            Object.entries(KNOWN_WORDS).forEach(([word, data]) => {
                const card = document.createElement('div');
                card.className = 'known-word-card';
                card.onclick = () => {
                    document.getElementById('voynichInput').value = word;
                    decodeWords();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                
                card.innerHTML = `
                    <div class="known-word-text">${word}</div>
                    <div class="known-word-meaning">${data.meanings[0]}</div>
                    <div style="margin-top: 8px; font-size: 0.85em; color: #00aa22;">
                        Position: ${data.position} | ${data.element}
                        <span class="frequency-badge">${data.frequency}</span>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        function filterKnownWords() {
            const search = document.getElementById('wordSearch').value.toLowerCase();
            const cards = document.querySelectorAll('.known-word-card');
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(search) ? 'block' : 'none';
            });
        }
        
        function showKnownWords() {
            document.getElementById('wordSearch').focus();
            document.getElementById('wordSearch').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ==================== PATTERN ANALYSIS ====================
        
        function analyzePattern() {
            const input = document.getElementById('voynichInput').value.trim();
            const results = document.getElementById('decodeResults');
            
            if (!input) {
                results.innerHTML = '<div style="color: #ff6666;">Please enter text for pattern analysis</div>';
                return;
            }
            
            const words = input.split(/[\s,;]+/).filter(w => w.length > 0);
            
            let watcherCount = 0;
            let fireCount = 0;
            let tripleVisionCount = 0;
            let sealedCount = 0;
            let holyCount = 0;
            
            const positionFreq = {};
            const patternFreq = {};
            
            words.forEach(word => {
                const analysis = analyzeWord(word);
                
                if (analysis.isWatcher) watcherCount++;
                if (analysis.hasFire) fireCount++;
                if (analysis.hasTripleVision) tripleVisionCount++;
                if (analysis.isSealed) sealedCount++;
                if (analysis.isHoly) holyCount++;
                
                positionFreq[analysis.position] = (positionFreq[analysis.position] || 0) + 1;
                
                // Extract patterns
                if (word.startsWith('ot')) patternFreq['ot- (sealed)'] = (patternFreq['ot- (sealed)'] || 0) + 1;
                if (word.startsWith('qo')) patternFreq['qo- (holy)'] = (patternFreq['qo- (holy)'] || 0) + 1;
                if (word.startsWith('ch')) patternFreq['ch- (living)'] = (patternFreq['ch- (living)'] || 0) + 1;
                if (word.includes('aiin')) patternFreq['-aiin (watchers)'] = (patternFreq['-aiin (watchers)'] || 0) + 1;
            });
            
            let html = '<div class="word-analysis">';
            html += '<div class="word-header">Pattern Analysis</div>';
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Total Words:</span>
                <span class="analysis-value">${words.length}</span>
            </div>`;
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Watcher Markers:</span>
                <span class="analysis-value highlight-watchers">${watcherCount} (${((watcherCount/words.length)*100).toFixed(1)}%)</span>
            </div>`;
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Fire Markers:</span>
                <span class="analysis-value highlight-fire">${fireCount} (${((fireCount/words.length)*100).toFixed(1)}%)</span>
            </div>`;
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Triple Vision:</span>
                <span class="analysis-value highlight-triple">${tripleVisionCount}</span>
            </div>`;
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Sealed Markers:</span>
                <span class="analysis-value">${sealedCount} (${((sealedCount/words.length)*100).toFixed(1)}%)</span>
            </div>`;
            
            html += `<div class="analysis-row">
                <span class="analysis-label">Holy Markers:</span>
                <span class="analysis-value">${holyCount} (${((holyCount/words.length)*100).toFixed(1)}%)</span>
            </div>`;
            
            // Position frequency
            html += '<div style="margin-top: 20px; font-size: 1.1em; color: #00ff41;">Position Frequency:</div>';
            Object.entries(positionFreq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10)
                .forEach(([pos, count]) => {
                    html += `<div class="analysis-row">
                        <span class="analysis-label">Position ${pos}:</span>
                        <span class="analysis-value">${count} times (${((count/words.length)*100).toFixed(1)}%)</span>
                    </div>`;
                });
            
            // Pattern frequency
            if (Object.keys(patternFreq).length > 0) {
                html += '<div style="margin-top: 20px; font-size: 1.1em; color: #00ff41;">Pattern Frequency:</div>';
                Object.entries(patternFreq)
                    .sort((a, b) => b[1] - a[1])
                    .forEach(([pattern, count]) => {
                        html += `<div class="analysis-row">
                            <span class="analysis-label">${pattern}:</span>
                            <span class="analysis-value">${count} times</span>
                        </div>`;
                    });
            }
            
            html += '</div>';
            
            results.innerHTML = html;
        }
        
        // ==================== FOLIO COMPARISON ====================
        
        function compareFolios() {
            const selection = document.getElementById('folioCompare').value;
            const results = document.getElementById('comparisonResults');
            
            if (!selection) {
                results.innerHTML = '<div style="color: #ff6666;">Please select folios to compare</div>';
                return;
            }
            
            if (selection === 'f71v-f72r1') {
                results.innerHTML = `
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <div class="comparison-title">f71v TAURUS LIGHT</div>
                            <div class="match-percentage">Day Phase ‚òÄÔ∏è</div>
                            <div class="analysis-row">
                                <span class="analysis-label">Nymphs:</span>
                                <span class="analysis-value">15 total (10 outer, 5 inner)</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Naked:</span>
                                <span class="analysis-value">3 nymphs (20%)</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Watchers:</span>
                                <span class="analysis-value">7 total appearances</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Fire markers:</span>
                                <span class="analysis-value">5 occurrences</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">State:</span>
                                <span class="analysis-value">Steady-state operation, exploitation mode</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Central:</span>
                                <span class="analysis-value">Bull feeding from manger (sustained work)</span>
                            </div>
                        </div>
                        
                        <div class="comparison-item">
                            <div class="comparison-title">f72r1 TAURUS DARK</div>
                            <div class="match-percentage">Night Phase üåô</div>
                            <div class="analysis-row">
                                <span class="analysis-label">Nymphs:</span>
                                <span class="analysis-value">16 total (10 outer NO barrels, 6 inner)</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Naked:</span>
                                <span class="analysis-value">ALL 16 nymphs (100%!)</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Watchers:</span>
                                <span class="analysis-value">17+ total (67% MORE surveillance)</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Fire markers:</span>
                                <span class="analysis-value">Similar count but sealed</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">State:</span>
                                <span class="analysis-value">Batch processing, unconscious processes</span>
                            </div>
                            <div class="analysis-row">
                                <span class="analysis-label">Central:</span>
                                <span class="analysis-value">Dark red bull (deoxyhemoglobin state)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="word-analysis" style="margin-top: 20px;">
                        <div class="word-header">Key Differences</div>
                        <div class="analysis-row">
                            <span class="analysis-label">16th Nymph:</span>
                            <span class="analysis-value">OVERFLOW/ANOMALY - The Shadow number (Z=16 Sulfur, 16 dinucleotides, 2‚Å¥)</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">No Barrels (outer):</span>
                            <span class="analysis-value">NO CONTAINMENT - Dark matter analogy, membrane dissolution</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">All Naked:</span>
                            <span class="analysis-value">TOTAL EXPOSURE - Unconscious revealed, dreams, hidden processes</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">More Watchers:</span>
                            <span class="analysis-value">MORE VIGILANCE needed in darkness (67% increase)</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Triple Water Sealing:</span>
                            <span class="analysis-value">otam + otam + chotam = Unconscious MUST be contained at night</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Interpretation:</span>
                            <span class="analysis-value">Light = Conscious work | Dark = Unconscious processing (sleep, autophagy, DNA replication)</span>
                        </div>
                    </div>
                `;
            } else if (selection === 'f85v2') {
                results.innerHTML = `
                    <div class="word-analysis">
                        <div class="word-header">f85v2 MEASURED TOKENS</div>
                        <div class="analysis-row">
                            <span class="analysis-label">Total Tokens:</span>
                            <span class="analysis-value">240 measured</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Position 0 (or/ar):</span>
                            <span class="analysis-value">11.6% frequency (HIGHEST)</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Position 12 (okal):</span>
                            <span class="analysis-value">10.0% frequency (SECOND)</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Position 5 (aiin):</span>
                            <span class="analysis-value">4.1% frequency (Integration/Watchers)</span>
                        </div>
                        <div class="analysis-row">
                            <span class="analysis-label">Null Average:</span>
                            <span class="analysis-value">0.2217 ‚âà 0.22 baseline (EXACT MATCH)</span>
                        </div>
                    </div>
                `;
            }
        }
        
        // ==================== UI HELPERS ====================
        
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
